- job:
    name: tempest-compute-host-check
    project-type: freestyle
    defaults: global
    node: tempest
    concurrent: true
    builders:
      - shell: '/usr/local/lib/nagios/plugins/check_tempest.py -t tempest.api.compute.servers.test_create_server.ServersTestJSON.test_verify_created_server_vcpus -s $AVAILABILITY_ZONE --host $HOST'
    parameters:
      - string:
          name: 'AVAILABILITY_ZONE'
          description: "Nova availability zone."
      - string:
          name: 'HOST'
          description: "Nova host to test. Host must be in AVAILABILITY_ZONE, if not nova will return a 'No Valid Host' error."
    properties:
      - slack:
          notify-start: true
          notify-success: true
          notify-aborted: true
          notify-notbuilt: true
          notify-unstable: true
          notify-failure: true
          notify-backtonormal: true
          notify-repeatedfailure: true
      - authorization:
          'nobody':
            - job-read
            - job-discover

