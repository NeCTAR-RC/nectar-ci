
- project:
    name: testcloud-nova
    jobs:
      - '{name}-rally':
        deployment: 'RCTest'

- project:
    name: testcloud-cinder
    jobs:
      - '{name}-rally':
        deployment: 'RCTest'

- project:
    name: testcloud-keystone
    jobs:
      - '{name}-rally':
        deployment: 'RCTest'

- project:
    name: testcloud-swift
    jobs:
      - '{name}-rally':
        deployment: 'RCTest'

- project:
    name: testcloud-glance
    jobs:
      - '{name}-rally':
        deployment: 'RCTest'

- job:
    name: testcloud-upgrade
    project-type: freestyle
    defaults: global
    node: upgrader
    concurrent: false
    builders:
      - shell: 'hivemind -R test-cloud upgrade.upgrade --unattended'
    triggers:
      - timed: "@midnight"
    publishers:
      - trigger:
          project: testcloud-nova-rally,testcloud-cinder-rally,testcloud-keystone-rally,testcloud-glance-rally,testcloud-swift-rally
          threshold: SUCCESS
      - slack
    properties:
      - slack:
          notify-start: true
          notify-success: true
          notify-aborted: true
          notify-notbuilt: true
          notify-unstable: true
          notify-failure: true
          notify-backtonormal: true
          notify-repeatedfailure: true
